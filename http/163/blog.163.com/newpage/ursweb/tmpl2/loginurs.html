<!DOCTYPE html>
<!--  LOF-1055:网易相册接入URS组件 (首页登录框)  -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>URS登录</title>

<style type="text/css">
html,body{padding:0;margin:0;border:none;outline:none;background:none;font-size:12px;}
.ttl{height:26px;line-height:26px;color:#fff;}
</style>

<script type="text/javascript">
document.domain = '163.com';
</script>

<script src="../../../../../reg.163/webzj.reg.163.com/webapp/javascript/page/json3.js"></script>
<script type="text/javascript" src="../../../../../reg.163/webzj.reg.163.com/webapp/javascript/message.js"></script>

</head>
<body>
<div class="ttl">请使用网易邮箱登录</div>
<div id="login-URS-iframe" class="login-URS-iframe">
    <iframe id="x-URS-iframe" frameborder="0" border="0" scrolling="no" allowtransparency="true" style="width: 100%; height: 100%; border: none; background: none;" src="../../../../../reg.163/webzj.reg.163.com/out/pub/index_5f_dl.html"></iframe>
</div>

<script type="text/javascript">
var photo163Name = function(passportname) {
    if (passportname.slice(-8) === "@163.com")
        return passportname.replace("@163.com", "");
    if (passportname.slice(-8) === "@126.com")
        return passportname.replace("@126.com", "@126");
    else if (passportname.slice(-8) === "@188.com")
        return passportname.replace("@188.com", "@188");
    else if (passportname.slice(-13) === "@popo.163.com")
        return passportname.replace("@popo.163.com", ".popo");
    else if (passportname.slice(-12) === "@vip.163.com")
        return passportname.replace("@vip.163.com", ".vip");
    else if (passportname.slice(-9) === "@yeah.net")
        return passportname.replace("@yeah.net", "@yeah");
    else if (passportname.slice(-5) === "@game")
        return passportname;
    else if (passportname.slice(-12) === "@vip.126.com")
        return passportname;

    return passportname;
};

var config_dl = {
        skin : 0,// 皮肤
        isHttps : 0,
        PROTOCOL : 'http',
        product : 'blog', // 产品ID
        promark : 'jGPzMoH',// 组件ID
        host : 'blog.163.com',// 组件所在域名
        //cookieDomain : '.blog.163.com',
        includeBox : 'login-URS-iframe',
        page : 'login',// 首屏
        single : 1 ,// 是否只用一个模块，1是，0否
        notFastReg : 0 ,
        needanimation : 0,
        cssDomain : 'http://b.bst.126.net/newpage/ursweb/tmpl2/',
        cssFiles :  'ursiframe.css?0013',
        placeholder: {account:'帐 号',pwd:'密 码'},
        regPlaceholder: {account:'',pwd:''},
        needUnLogin : 1 ,//【可选】是否需要十天免登按钮
        defaultUnLogin : 0,//【可选】十天免登初始化状态，默认为0
        logincb : function(_username){
            //alert(_username + '跨域站点在这里去设置cookie');
            
            var _target = top.location.href || '../../../../../blog.163.com';
            //if(_target.indexOf('login.html')===0){
            //    _target = '../../../../../blog.163.com';
            //}
            _target = encodeURIComponent(_target);
            var _username = photo163Name(_username);
            
            var _url = "../../../loginGate.do" + _username + "&target="+_target+"&blogActivation=true&shownewtemplate=true";
            top.location.href = _url;
            
        }, // 登录成功后回调
        regcb : function(_username){
            //alert(_username + '跨域站点在这里去设置cookie，只支持内域邮箱，外域还需要激活。')
            top.location.reload();
        }// 注册成功后回调

};

var _ursIns = new URS('','',config_dl);

//调整iframe容器节点的高度
var _wrapNode = parent.document.getElementById('ursloginwrap');
var _loginURSIframe = document.getElementById('login-URS-iframe');
var adjustWrapHeight = function(){
    setInterval(function(){
        try{
            var _height = parseInt(_loginURSIframe.style.height)|| 0;
            
            _wrapNode.style.height = (_height + 26) + 'px';
        } catch(e){}
    }, 200);
};

adjustWrapHeight();


</script>
</body>
</html>